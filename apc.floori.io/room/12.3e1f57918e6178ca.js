(function(){try{var I=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},P=(new Error).stack;P&&(I._sentryDebugIds=I._sentryDebugIds||{},I._sentryDebugIds[P]="2af3244f-6448-4294-b6b0-ed55d908e6e0",I._sentryDebugIdIdentifier="sentry-dbid-2af3244f-6448-4294-b6b0-ed55d908e6e0")}catch{}})(),(self.webpackChunkCrownCrete=self.webpackChunkCrownCrete||[]).push([[12],{8590:(I,P,o)=>{o.d(P,{au:()=>W,sM:()=>S});var l=o(2560),h=o(8987),E=o(1121);const m=new l.OlP("CrownCrete_API_BASE");let S=(()=>{class n{constructor(){this.apiUrl=(0,l.f3M)(E.d8)?.apiUrl,this.endpoints={...E.rr},this.http=(0,l.f3M)(h.eN)}get(t,e){const s=this.parseUrl(t,e?.routeParams||{}),i=new h.LE({fromObject:this.parseToHttpParams(e?.queryParams||{})});return this.http.get(s,{params:i})}isObject(t){return t===Object(t)&&!Array.isArray(t)&&"function"!=typeof t&&null!==t}parseObjectToString(t){return Object.keys(t).filter(e=>!!t?.[e]).map(e=>e.toString()).join(",")}parseToHttpParams(t){const e={};return Object.keys(t).forEach(s=>{if(t[s]){let i=this.isObject(t[s])?this.parseObjectToString(t[s]):t[s]?.toString();i=i?.trim(),e[s]=i}}),e}parseUrl(t,e={}){let s=t;return Object.keys(e).forEach(i=>{const y=`:${i}`;i&&(null!=e[i]&&e[i]||""===e[i])&&t.includes(y)&&(s=s.replace(y,e[i]?.toString()))}),`${this.apiUrl}/${s}`}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();var D=o(6096),v=o(635),j=o(9337),_=o(155),L=o(1955);let T=(()=>{class n extends S{fetchBaseRooms(t){let e=this.endpoints.rooms.baseRooms;return e=t?`${e}/${t}`:e,this.get(e).pipe((0,v.U)(s=>Object.keys(s||{}).map(i=>({key:i?.toLowerCase()?.trim(),items:s[i]}))))}createVisitorRoom(t,e,s){const i=new FormData;i.append("image",t);const y=this.parseUrl(this.endpoints.rooms.createRoom,{visitorId:e});return this.http.request(new h.aW("POST",y,i,{reportProgress:!0})).pipe((0,j.b)(O=>{if(O.type===h.dt.UploadProgress){const C=Math.round(100*(O.loaded||0)/(O.total||100));if(s){const z=isNaN(C)?40:C;s(z)}}}),(0,_.P)(O=>O instanceof h.Zn),(0,v.U)(O=>O.body),(0,L.Z)())}}return n.\u0275fac=function(){let p;return function(e){return(p||(p=l.n5z(n)))(e||n)}}(),n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();var $=o(3158),R=o(5474),B=o(5713);const F={provide:h.TP,useClass:(()=>{class n{constructor(t,e){this.appFacade=t,this.vendorId=e}intercept(t,e){const s=t.headers.has("Authorization")?t:t.clone({headers:t.headers.append("Authorization",`Bearer ${this.vendorId}`)});return e.handle(s).pipe((0,$.K)(i=>(this.roomsForGivenVisitorIdNotFound(i.url,i.status)||this.appFacade.setError(!0),(0,R._)(()=>i))))}roomsForGivenVisitorIdNotFound(t,e){const i=new RegExp(`${E.rr.rooms.baseRooms}/.+$`);return 404===e&&i.test(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(B.lF),l.LFG(E.Mk))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),multi:!0};var b=o(2874),K=o(9896);let M=(()=>{class n extends S{addSession(t){const e=this.parseUrl(this.endpoints.room.session);return this.http.post(e,{id:t})}fetchProduct(t){return this.get(this.endpoints.room.product,{queryParams:{sku:t?.sku||"",externalId:t?.extId||"",id:t?.productId||""}}).pipe((0,v.U)(e=>{const s=e?.find(i=>i.id===t?.productId||i.sku===t?.sku||i.externalId===t?.extId);if(!s)throw new Error;return new b.qn(s)}))}fetchCtaButtons(){return this.get(this.endpoints.room.ctaButtons).pipe((0,v.U)(t=>Object.keys(t).map(e=>{if(!(e in D.Lr)||!t[e])return null;const s=t[e];return new D.eP(e,s.id,s)}).filter(e=>!!e)))}fetchBreadcrumb(t=""){return this.get(this.endpoints.room.breadcrumb,{routeParams:{productId:t}})}filterProducts(t){const e=this.parseUrl(this.endpoints.room.filterProducts);return this.http.post(e,{...t,limit:t.limit||E.Ff.products.pageLimit}).pipe((0,v.U)(s=>({...s,data:{...s.data,products:s.data.products.map(i=>({...i,parentId:t.catalogId})),catalogs:s.data.catalogs?.map(i=>({...i,isCatalog:!0}))}})))}fetchFilterDefinitions(t=!0){return this.get(this.endpoints.room.filters,{queryParams:{isLiteRequest:!0}}).pipe((0,v.U)(e=>e.map(s=>({...s,optionsKeyed:s.options?.map(i=>({label:i,value:i,key:(0,K.Z)()}))||[]}))))}fetchEstimation(t,e){const s=this.parseUrl(this.endpoints.room.estimation);return this.http.post(s,{roomId:t,visitorId:e})}getArLinksUrl(t,e){const s=this.parseUrl(this.endpoints.room.arLinks,{variantId:e});return this.http.post(s,t)}sendQuote(t){const e=this.parseUrl(this.endpoints.room.quote);return this.http.post(e,structuredClone(t)).pipe((0,v.U)(()=>{}))}}return n.\u0275fac=function(){let p;return function(e){return(p||(p=l.n5z(n)))(e||n)}}(),n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),W=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[{provide:m,useClass:S},{provide:D.O7,useClass:T},{provide:D.Sz,useClass:M},F],imports:[h.JF]}),n})()},4437:(I,P,o)=>{o.d(P,{b:()=>E});var l=o(833),h=o(2971);function E(m){return!!m&&(m instanceof l.y||(0,h.m)(m.lift)&&(0,h.m)(m.subscribe))}},8281:(I,P,o)=>{o.d(P,{E6:()=>i,m1:()=>O});var l=o(833),h=o(7714),E=o(3888),m=o(6067),S=o(4437),D=o(745),v=o(4915),j=o(591),_=o(5474),L=o(9120),T=o(6562),$=o(253),R=o(9295),B=o(8728),U=o(9337),F=o(538),b=o(635),K=o(3158),M=o(8951),W=o(8977),n=o(9196),p=o(2560);function e(c){return"function"==typeof c.ngrxOnStoreInit}function s(c){return"function"==typeof c.ngrxOnStateInit}function i(c){const d=new p.OlP("@ngrx/component-store ComponentStore with Hooks");return[{provide:d,useClass:c},{provide:c,useFactory:()=>{const r=(0,p.f3M)(d);return r.\u0275hasProvider=!0,e(r)&&r.ngrxOnStoreInit(),s(r)&&r.state$.pipe((0,R.q)(1)).subscribe(()=>r.ngrxOnStateInit()),r}}]}const y=new p.OlP("@ngrx/component-store Initial State");let O=(()=>{class c{constructor(r){this.destroySubject$=new m.t(1),this.destroy$=this.destroySubject$.asObservable(),this.stateSubject$=new m.t(1),this.isInitialized=!1,this.state$=this.select(a=>a),this.\u0275hasProvider=!1,r&&this.initState(r),this.checkProviderForHooks()}ngOnDestroy(){this.stateSubject$.complete(),this.destroySubject$.next()}updater(r){return a=>{let f,u=!0;const A=((0,S.b)(a)?a:(0,D.of)(a)).pipe((0,B.Q)(v.N),(0,U.b)(()=>this.assertStateIsInitialized()),(0,F.M)(this.stateSubject$),(0,b.U)(([g,Y])=>r(Y,g)),(0,U.b)(g=>this.stateSubject$.next(g)),(0,K.K)(g=>u?(f=g,j.E):(0,_._)(()=>g)),(0,M.R)(this.destroy$)).subscribe();if(f)throw f;return u=!1,A}}initState(r){(0,L.x)([r],v.N).subscribe(a=>{this.isInitialized=!0,this.stateSubject$.next(a)})}setState(r){"function"!=typeof r?this.initState(r):this.updater(r)()}patchState(r){const a="function"==typeof r?r(this.get()):r;this.updater((u,f)=>({...u,...f}))(a)}get(r){let a;return this.assertStateIsInitialized(),this.stateSubject$.pipe((0,R.q)(1)).subscribe(u=>{a=r?r(u):u}),a}select(...r){const{observablesOrSelectorsObject:a,projector:u,config:f}=function x(c){const d=Array.from(c);let r={debounce:!1};if(function C(c){return typeof c.debounce<"u"}(d[d.length-1])&&(r={...r,...d.pop()}),1===d.length&&"function"!=typeof d[0])return{observablesOrSelectorsObject:d[0],projector:void 0,config:r};const a=d.pop();return{observablesOrSelectorsObject:d,projector:a,config:r}}(r);return(function z(c,d){return Array.isArray(c)&&0===c.length&&d}(a,u)?this.stateSubject$:(0,T.a)(a)).pipe(f.debounce?function t(){return c=>new l.y(d=>{let r,a;const u=new h.w0;return u.add(c.subscribe({complete:()=>{r&&d.next(a),d.complete()},error:f=>{d.error(f)},next:f=>{a=f,r||(r=E.E.schedule(()=>{d.next(a),r=void 0}),u.add(r))}})),u})}():c=>c,u?(0,b.U)(A=>a.length>0&&Array.isArray(A)?u(...A):u(A)):c=>c,(0,W.x)(),(0,n.d)({refCount:!0,bufferSize:1}),(0,M.R)(this.destroy$))}effect(r){const a=new $.x;return r(a).pipe((0,M.R)(this.destroy$)).subscribe(),u=>((0,S.b)(u)?u:(0,D.of)(u)).pipe((0,M.R)(this.destroy$)).subscribe(H=>{a.next(H)})}checkProviderForHooks(){E.E.schedule(()=>{if((0,p.X6Q)()&&(e(this)||s(this))&&!this.\u0275hasProvider){const r=[e(this)?"OnStoreInit":"",s(this)?"OnStateInit":""].filter(a=>a);console.warn(`@ngrx/component-store: ${this.constructor.name} has the ${r.join(" and ")} lifecycle hook(s) implemented without being provided using the provideComponentStore(${this.constructor.name}) function. To resolve this, provide the component store via provideComponentStore(${this.constructor.name})`)}})}assertStateIsInitialized(){if(!this.isInitialized)throw new Error(`${this.constructor.name} has not been initialized yet. Please make sure it is initialized before updating/getting.`)}}return c.\u0275fac=function(r){return new(r||c)(p.LFG(y,8))},c.\u0275prov=p.Yz7({token:c,factory:c.\u0275fac}),c})()}}]);
//# sourceMappingURL=12.3e1f57918e6178ca.js.map